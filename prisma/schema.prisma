generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
}

enum Visibility {
  PUBLIC
  REDACTED
}

enum TaskStatus {
  NOT_STARTED
  IN_PROGRESS
  ON_HOLD
  COMPLETED
}

model ActiveActivity {
  id              String       @id
  userUpn         String
  title           String
  type            String
  status          TaskStatus   @default(IN_PROGRESS)
  project         String?
  notes           String?
  referenceId     String?
  startedAt       DateTime
  lastHeartbeatAt DateTime
  visibility      Visibility @default(PUBLIC)
  redactedLabel   String?  // optional custom message

  @@index([userUpn])
}

model ActivityEvent {
  id          String       @id
  userUpn     String
  title       String
  type        String
  status      TaskStatus   @default(IN_PROGRESS)
  project     String?
  notes       String?
  referenceId String?
  startedAt   DateTime
  endedAt     DateTime?
  visibility     Visibility @default(PUBLIC)
  redactedLabel  String?  // optional custom message

  @@index([userUpn])
}
